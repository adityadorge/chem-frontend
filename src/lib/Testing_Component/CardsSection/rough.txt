<script lang="ts">
  export let icon = "/assets/default-icon.svg";
  export let title = "Default Title";
  export let description = "Default description here.";
  export let info = "Default info here.";
  export let category: string;
  export let showSubcategories: ((category: string) => void) | undefined;

  // Optional: content type label (defaults to "ARTICLE")
  export let type: string = "ARTICLE";

  function onActivate() {
    showSubcategories?.(category);
  }
  function onKeydown(e: KeyboardEvent) {
    if (e.key === "Enter" || e.key === " ") {
      e.preventDefault();
      onActivate();
    }
  }
</script>

<article
  class="blog-card"
  tabindex="0"
  role="button"
  aria-label={title}
  on:click={onActivate}
  on:keydown={onKeydown}
>
  <div class="thumb-wrap">
    <div class="thumb-bg" aria-hidden="true"></div>
    <img class="thumb" src={icon} alt="" loading="lazy" />
  </div>

  <div class="body">
    <span class="eyebrow">{type}</span>
    <h3 class="title">
      {title}
      <span class="chev" aria-hidden="true">â€º</span>
    </h3>
  </div>
</article>

<style>
  :root {
    --card-title: #3e27b7;     /* purple title */
    --card-eyebrow: #b08bff;   /* lighter purple eyebrow */
    --card-shadow: 0 10px 24px rgba(12, 1, 123, 0.10);
    --card-shadow-hover: 0 18px 36px rgba(12, 1, 123, 0.16);
    --thumb-radius: 14px;
  }

  /* Outer tile (no fixed width; grid controls sizing) */
  .blog-card {
    display: block;
    width: 100%;
    background: transparent;
    cursor: pointer;
    outline: none;
    transition: transform .18s ease, box-shadow .18s ease;
  }
  .blog-card:focus-visible {
    box-shadow: 0 0 0 3px rgba(62, 39, 183, .35);
    border-radius: 10px;
  }
  .blog-card:hover {
    transform: translateY(-2px);
  }

  /* Thumbnail with colored drop and rounded corners (matches reference) */
  .thumb-wrap {
    position: relative;
    width: 100%;
    height: auto;
    aspect-ratio: 16 / 9;
    border-radius: var(--thumb-radius);
    filter: drop-shadow(var(--card-shadow));
  }
  .blog-card:hover .thumb-wrap {
    filter: drop-shadow(var(--card-shadow-hover));
  }
  .thumb-bg {
    position: absolute;
    inset: 0;
    background: #6c50ff; /* subtle purple backdrop behind image */
    border-radius: var(--thumb-radius);
  }
  .thumb {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: var(--thumb-radius);
  }

  /* Body */
  .body {
    margin-top: 12px;
  }

  /* Eyebrow label (small uppercase, letter-spaced) */
  .eyebrow {
    display: inline-block;
    color: var(--card-eyebrow);
    font-weight: 800;
    font-size: 12px;
    letter-spacing: 1.6px;
    text-transform: uppercase;
    margin-bottom: 8px;
  }

  /* Title (bold, purple, underline on hover) */
  .title {
    margin: 0;
    color: var(--card-title);
    font-weight: 800;
    font-size: 20px;
    line-height: 1.3;
    text-decoration: none;
  }
  .blog-card:hover .title {
    text-decoration: underline;
  }

  /* Inline chevron */
  .chev {
    margin-left: 6px;
    font-weight: 800;
  }

  /* Responsive type tweaks */
  @media (min-width: 981px) {
    .title { font-size: 22px; }
  }
</style>
